import { TelemetryRow } from 'forza-open-telemetry-server';

const headers: Record<number, keyof TelemetryRow> = {
  0: 'epochMs',
  1: 'isRaceOn',
  2: 'timestampMS',
  3: 'engineMaxRpm',
  4: 'engineIdleRpm',
  5: 'currentEngineRpm',
  6: 'accelerationX',
  7: 'accelerationY',
  8: 'accelerationZ',
  9: 'velocityX',
  10: 'velocityY',
  11: 'velocityZ',
  12: 'angularVelocityX',
  13: 'angularVelocityY',
  14: 'angularVelocityZ',
  15: 'yaw',
  16: 'pitch',
  17: 'roll',
  18: 'normalizedSuspensionTravelFrontLeft',
  19: 'normalizedSuspensionTravelFrontRight',
  20: 'normalizedSuspensionTravelRearLeft',
  21: 'normalizedSuspensionTravelRearRight',
  22: 'tireSlipRatioFrontLeft',
  23: 'tireSlipRatioFrontRight',
  24: 'tireSlipRatioRearLeft',
  25: 'tireSlipRatioRearRight',
  26: 'wheelRotationSpeedFrontLeft',
  27: 'wheelRotationSpeedFrontRight',
  28: 'wheelRotationSpeedRearLeft',
  29: 'wheelRotationSpeedRearRight',
  30: 'wheelOnRumbleStripFrontLeft',
  31: 'wheelOnRumbleStripFrontRight',
  32: 'wheelOnRumbleStripRearLeft',
  33: 'wheelOnRumbleStripRearRight',
  34: 'wheelInPuddleDepthFrontLeft',
  35: 'wheelInPuddleDepthFrontRight',
  36: 'wheelInPuddleDepthRearLeft',
  37: 'wheelInPuddleDepthRearRight',
  38: 'surfaceRumbleFrontLeft',
  39: 'surfaceRumbleFrontRight',
  40: 'surfaceRumbleRearLeft',
  41: 'surfaceRumbleRearRight',
  42: 'tireSlipAngleFrontLeft',
  43: 'tireSlipAngleFrontRight',
  44: 'tireSlipAngleRearLeft',
  45: 'tireSlipAngleRearRight',
  46: 'tireCombinedSlipFrontLeft',
  47: 'tireCombinedSlipFrontRight',
  48: 'tireCombinedSlipRearLeft',
  49: 'tireCombinedSlipRearRight',
  50: 'suspensionTravelMetersFrontLeft',
  51: 'suspensionTravelMetersFrontRight',
  52: 'suspensionTravelMetersRearLeft',
  53: 'suspensionTravelMetersRearRight',
  54: 'carOrdinal',
  55: 'carClass',
  56: 'carPerformanceIndex',
  57: 'drivetrainType',
  58: 'numCylinders',
  59: 'carCategory',
  60: 'positionX',
  61: 'positionY',
  62: 'positionZ',
  63: 'speed',
  64: 'power',
  65: 'torque',
  66: 'tireTempFrontLeft',
  67: 'tireTempFrontRight',
  68: 'tireTempRearLeft',
  69: 'tireTempRearRight',
  70: 'boost',
  71: 'fuel',
  72: 'distance',
  73: 'bestLapTime',
  74: 'lastLapTime',
  75: 'currentLapTime',
  76: 'currentRaceTime',
  77: 'lap',
  78: 'racePosition',
  79: 'accelerator',
  80: 'brake',
  81: 'clutch',
  82: 'handbrake',
  83: 'gear',
  84: 'steer',
  85: 'normalDrivingLine',
  86: 'normalAiBrakeDifference',
};

export type TelemetryDataRow = (boolean | number)[];

export function telemetryArrayToObject(row: TelemetryDataRow) {
  const headerOffset = row.length === 86 ? 1 : 0;
  return row.reduce((acc, value, index) => ({
    ...acc,
    [headers[index + headerOffset]]: value,
  }), { epochMs: 0 } as TelemetryRow);
}

export function telemetryArraysToObjects(rows: TelemetryDataRow[]): TelemetryRow[] {
  return rows.map(telemetryArrayToObject);
}

// const sampleData = rawData.map((row) => {
//   return row.reduce((acc, value, index) => ({
//     ...acc,
//     [headers[index]]: value,
//   }), {} as TelemetryRow);
// });

// export default sampleData;

// isRaceOn
// timestampMS
// engineMaxRpm
// engineIdleRpm
// currentEngineRpm
// accelerationX
// accelerationY
// accelerationZ
// velocityX
// velocityY
// velocityZ
// angularVelocityX
// angularVelocityY
// angularVelocityZ
// yaw
// pitch
// roll
// normalizedSuspensionTravelFrontLeft
// normalizedSuspensionTravelFrontRight
// normalizedSuspensionTravelRearLeft
// normalizedSuspensionTravelRearRight
// tireSlipRatioFrontLeft
// tireSlipRatioFrontRight
// tireSlipRatioRearLeft
// tireSlipRatioRearRight
// wheelRotationSpeedFrontLeft
// wheelRotationSpeedFrontRight
// wheelRotationSpeedRearLeft
// wheelRotationSpeedRearRight
// wheelOnRumbleStripFrontLeft
// wheelOnRumbleStripFrontRight
// wheelOnRumbleStripRearLeft
// wheelOnRumbleStripRearRight
// wheelInPuddleDepthFrontLeft
// wheelInPuddleDepthFrontRight
// wheelInPuddleDepthRearLeft
// wheelInPuddleDepthRearRight
// surfaceRumbleFrontLeft
// surfaceRumbleFrontRight
// surfaceRumbleRearLeft
// surfaceRumbleRearRight
// tireSlipAngleFrontLeft
// tireSlipAngleFrontRight
// tireSlipAngleRearLeft
// tireSlipAngleRearRight
// tireCombinedSlipFrontLeft
// tireCombinedSlipFrontRight
// tireCombinedSlipRearLeft
// tireCombinedSlipRearRight
// suspensionTravelMetersFrontLeft
// suspensionTravelMetersFrontRight
// suspensionTravelMetersRearLeft
// suspensionTravelMetersRearRight
// carOrdinal
// carClass
// carPerformanceIndex
// drivetrainType
// numCylinders
// positionX
// positionY
// positionZ
// speed
// power
// torque
// tireTempFl
// tireTempFr
// tireTempRl
// tireTempRr
// boost
// fuel
// distance
// bestLapTime
// lastLapTime
// currentLapTime
// currentRaceTime
// lap
// racePosition
// accelerator
// brake
// clutch
// handbrake
// gear
// steer
// normalDrivingLine
// normalAiBrakeDifference
// true
// 64978390
// 7999.995
// 900.8784
// 900.87885
// -2.0868463E-05
// 0.0033228702
// 0.00042214314
// 6.372236E-05
// -3.8866718E-05
// -8.653864E-05
// 2.3456374E-05
// 1.714925E-07
// -9.953374E-05
// -2.8237197
// -0.12636243
// -0.0062798564
// 0.33099875
// 0.33377165
// 0.36151287
// 0.36604154
// -0.038000163
// 0.047995634
// -0.011064427
// 0.0962499
// 0
// 0
// 0
// 0
// 0
// 0
// 0
// 0
// 0
// 0
// 0
// 0
// 0.120000005
// 0.120000005
// 0.120000005
// 0.120000005
// 0.027799984
// 0.040952187
// -0.030492846
// -0.026284391
// 0.047083452
// 0.06309249
// 0.032438174
// 0.09977431
// -0.0017563552
// -0.0013391525
// 0.0010789782
// 0.001772806
// 120
// 3
// 32
// 2
// 4
// -8137.4253
// 214.11404
// 2914.2068
// 0.00011428078
// -0.0005011798
// -5.312495E-06
// 151.63475
// 152.29936
// 151.41614
// 151.41614
// -11.024998
// 1
// -2348.555
// 0
// 0
// 149.41609
// 151.649
// 0
// 1
// 0
// 0
// 0
// 0
// 1
// 0
// 127
// 0

// GetSingle
// GetUInt32
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetUInt8
// GetUInt8
// GetUInt8
// GetUInt8
// GetUInt8
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetSingle
// GetUInt16
// GetUInt8
// GetUInt8
// GetUInt8
// GetUInt8
// GetUInt8
// GetUInt8
// GetInt8
// GetUInt8
// GetUInt8
